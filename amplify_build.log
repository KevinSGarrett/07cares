2025-10-28T05:20:33.663Z [INFO]: # Build environment configured with Standard build compute type: 8GiB Memory, 4vCPUs, 128GB Disk Space
2025-10-28T05:20:34.087Z [INFO]: # Cloning repository: git@github.com:KevinSGarrett/07cares.git
2025-10-28T05:20:34.599Z [INFO]: 
2025-10-28T05:20:34.600Z [INFO]: Cloning into '07cares'...
2025-10-28T05:20:34.600Z [INFO]: # Checking for Git submodules at: /codebuild/output/src107906532/src/07cares/.gitmodules
2025-10-28T05:20:34.608Z [INFO]: # Retrieving environment cache...
2025-10-28T05:20:34.659Z [WARNING]: ! Unable to write cache: {"code":"ERR_BAD_REQUEST","message":"Request failed with status code 404"})}
2025-10-28T05:20:34.659Z [INFO]: ---- Setting Up SSM Secrets ----
2025-10-28T05:20:34.659Z [INFO]: SSM params {"Path":"/amplify/d3ru1wmw4mnh7w/main/","WithDecryption":true}
2025-10-28T05:20:34.714Z [WARNING]: !Failed to set up process.env.secrets
2025-10-28T05:20:35.564Z [INFO]: # No package override configuration found.
2025-10-28T05:20:35.569Z [INFO]: # Retrieving cache...
2025-10-28T05:20:35.628Z [INFO]: # Retrieved cache
2025-10-28T05:20:40.062Z [INFO]: ## Starting Backend Build
                                 ## Checking for associated backend environment...
                                 ## No backend environment association found, continuing...
                                 ## Completed Backend Build
2025-10-28T05:20:40.067Z [INFO]: {"backendDuration": 0}
                                 ## Starting Frontend Build
                                 # Starting phase: preBuild
                                 # Executing command: corepack enable
2025-10-28T05:20:41.430Z [INFO]: # Executing command: corepack prepare pnpm@latest --activate
2025-10-28T05:20:41.833Z [INFO]: Preparing pnpm@latest for immediate activation...
2025-10-28T05:20:42.383Z [INFO]: # Executing command: echo "Node version: $(node -v 2>/dev/null || true)"
2025-10-28T05:20:42.388Z [INFO]: Node version: v22.18.0
2025-10-28T05:20:42.389Z [INFO]: # Executing command: echo "NPM version:  $(npm -v  2>/dev/null || true)"
2025-10-28T05:20:45.844Z [INFO]: NPM version:  10.9.3
2025-10-28T05:20:45.848Z [INFO]: # Executing command: echo "pnpm version: $(pnpm -v 2>/dev/null || true)"
2025-10-28T05:20:46.521Z [INFO]: pnpm version: 10.19.0
2025-10-28T05:20:46.521Z [INFO]: # Executing command: [ -n "$NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY" ] || { echo "Missing NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY"; exit 1; }
                                 # Executing command: [ -n "$CLERK_SECRET_KEY" ] || { echo "Missing CLERK_SECRET_KEY"; exit 1; }
                                 # Executing command: [ -n "$STRIPE_SECRET_KEY" ] || { echo "Missing STRIPE_SECRET_KEY"; exit 1; }
                                 # Executing command: [ -n "$DATABASE_URL" ] || { echo "Missing DATABASE_URL"; exit 1; }
                                 # Executing command: pnpm config set ignore-scripts false
2025-10-28T05:20:46.824Z [INFO]: # Executing command: pnpm install
2025-10-28T05:20:47.243Z [INFO]: Lockfile is up to date, resolution step is skipped
2025-10-28T05:20:47.288Z [INFO]: Progress: resolved 1, reused 0, downloaded 0, added 0
2025-10-28T05:20:47.380Z [INFO]: Packages: +417
                                 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
2025-10-28T05:20:48.291Z [INFO]: Progress: resolved 417, reused 0, downloaded 68, added 29
2025-10-28T05:20:49.291Z [INFO]: Progress: resolved 417, reused 0, downloaded 85, added 38
2025-10-28T05:20:50.297Z [INFO]: Progress: resolved 417, reused 0, downloaded 93, added 39
2025-10-28T05:20:51.300Z [INFO]: Progress: resolved 417, reused 0, downloaded 212, added 106
2025-10-28T05:20:52.253Z [INFO]: Progress: resolved 417, reused 0, downloaded 417, added 417, done
2025-10-28T05:20:52.549Z [INFO]: dependencies:
                                 + @clerk/nextjs 6.34.0
                                 + @prisma/client 6.18.0
                                 + @t3-oss/env-nextjs 0.13.8
                                 + next 16.0.0
                                 + pusher 5.2.0
                                 + pusher-js 8.4.0
                                 + react 19.2.0
                                 + react-dom 19.2.0
                                 + stripe 19.1.0
                                 + typesense 2.1.0
                                 + zod 4.1.12
                                 devDependencies:
                                 + @types/node 24.9.1
                                 + @types/react 19.2.2
                                 + eslint 9.38.0
                                 + eslint-config-next 16.0.0
                                 + prisma 6.18.0
                                 ╭ Warning ─────────────────────────────────────────────────────────────────────╮
                                 │                                                                              │
                                 │   Ignored build scripts: @clerk/shared, @prisma/client, @prisma/engines,     │
                                 │   prisma, sharp, unrs-resolver.                                              │
                                 │   Run "pnpm approve-builds" to pick which dependencies should be allowed     │
                                 │   to run scripts.                                                            │
                                 │                                                                              │
                                 ╰──────────────────────────────────────────────────────────────────────────────╯
2025-10-28T05:20:52.588Z [INFO]: Done in 5.7s using pnpm v10.19.0
2025-10-28T05:20:52.615Z [INFO]: # Executing command: pnpm dlx prisma generate
2025-10-28T05:20:53.846Z [WARNING]: Progress: resolved 1, reused 0, downloaded 0, added 0
2025-10-28T05:20:54.975Z [WARNING]: Progress: resolved 31, reused 0, downloaded 29, added 0
2025-10-28T05:20:55.361Z [WARNING]: Packages: +33
                                    +++++++++++++++++++++++++++++++++
2025-10-28T05:20:55.457Z [WARNING]: Progress: resolved 33, reused 0, downloaded 33, added 33, done
2025-10-28T05:20:55.492Z [WARNING]: .../prisma@6.18.0/node_modules/prisma preinstall$ node scripts/preinstall-entry.js
2025-10-28T05:20:55.630Z [WARNING]: .../prisma@6.18.0/node_modules/prisma preinstall: Done
2025-10-28T05:20:57.591Z [INFO]: Prisma schema loaded from prisma/schema.prisma
2025-10-28T05:20:57.818Z [INFO]: ✔ Generated Prisma Client (v6.18.0) to ./node_modules/.pnpm/@prisma+client@6.18.0_prisma@6.18.0_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client in 72ms
                                 Start by importing your Prisma Client (See: https://pris.ly/d/importing-client)
                                 Tip: Want to turn off tips and other hints? https://pris.ly/tip-4-nohints
2025-10-28T05:20:57.869Z [INFO]: # Executing command: echo "diagnostic: search/index-campaign/route.ts (first 40 lines)"
                                 diagnostic: search/index-campaign/route.ts (first 40 lines)
2025-10-28T05:20:57.869Z [INFO]: # Executing command: head -n 40 ./src/app/api/search/index-campaign/route.ts || true
2025-10-28T05:20:57.870Z [INFO]: export const dynamic = "force-dynamic";
                                 // @ts-nocheck
                                 // guarded client
                                 import { getTypesense } from "@/lib/typesense";
                                 import { prisma } from "@/server/db";
                                 export async function POST() {
                                 
                                 const tsClient = getTypesense();
                                 if (!tsClient) { return new Response("tsClient disabled at build", { status: 200 }); }const campaigns = await prisma.campaign.findMany({ take: 100 });
                                 const collection = "campaigns";
                                 try { await tsClient.collections(collection).retrieve(); }
                                 catch {
                                 await tsClient.collections().create({
                                 name: collection,
                                 fields: [
                                 { name: "id", type: "string" },
                                 { name: "title", type: "string" },
                                 { name: "city", type: "string" },
                                 { name: "state", type: "string", facet: true },
                                 { name: "isAon", type: "bool", facet: true },
                                 ],
                                 default_sorting_field: "id",
                                 });
                                 }
                                 const docs = (campaigns as any[]).map((c: any) => ({ id: c.id, title: c.title, city: c.city, state: c.state, isAon: (c as any).isAon }));
                                 await tsClient.collections(collection).documents().import(docs, { action: "upsert" });
                                 return new Response("ok");
                                 }
2025-10-28T05:20:57.870Z [INFO]: # Completed phase: preBuild
                                 # Starting phase: build
                                 # Executing command: pnpm build
2025-10-28T05:20:58.187Z [INFO]: > 07cares@0.1.0 build /codebuild/output/src107906532/src/07cares
                                 > next build
2025-10-28T05:20:58.767Z [INFO]: ⚠ No build cache found. Please configure build caching for faster rebuilds. Read more: https://nextjs.org/docs/messages/no-cache
2025-10-28T05:20:58.773Z [INFO]: Attention: Next.js now collects completely anonymous telemetry regarding usage.
2025-10-28T05:20:58.773Z [INFO]: This information is used to shape Next.js' roadmap and prioritize features.
                                 You can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:
                                 https://nextjs.org/telemetry
2025-10-28T05:20:58.783Z [INFO]: ▲ Next.js 16.0.0 (Turbopack)
2025-10-28T05:20:58.784Z [INFO]: 
2025-10-28T05:20:58.835Z [WARNING]: ⚠ The "middleware" file convention is deprecated. Please use "proxy" instead. Learn more: https://nextjs.org/docs/messages/middleware-to-proxy
2025-10-28T05:20:58.868Z [INFO]: Creating an optimized production build ...
2025-10-28T05:21:08.010Z [INFO]: ✓ Compiled successfully in 8.8s
2025-10-28T05:21:08.023Z [INFO]: Skipping validation of types
2025-10-28T05:21:08.191Z [INFO]: 
2025-10-28T05:21:08.192Z [INFO]: We detected TypeScript in your project and reconfigured your tsconfig.json file for you.
2025-10-28T05:21:08.192Z [INFO]: The following suggested values were added to your tsconfig.json. These values can be changed to fit your project's needs:
2025-10-28T05:21:08.192Z [INFO]: - include was updated to add '.next/dev/types/**/*.ts'
2025-10-28T05:21:08.192Z [INFO]: 
2025-10-28T05:21:08.210Z [INFO]: Collecting page data ...
2025-10-28T05:21:08.732Z [WARNING]: ❌ Invalid environment variables: [
                                    {
                                    expected: 'string',
                                    code: 'invalid_type',
                                    path: [ 'TWILIO_MESSAGING_SERVICE_SID' ],
                                    message: 'Invalid input: expected string, received undefined'
                                    },
                                    {
                                    expected: 'string',
                                    code: 'invalid_type',
                                    path: [ 'GROWTHBOOK_API_HOST' ],
                                    message: 'Invalid input: expected string, received undefined'
                                    },
                                    {
                                    expected: 'string',
                                    code: 'invalid_type',
                                    path: [ 'NEXT_PUBLIC_APP_URL' ],
                                    message: 'Invalid input: expected string, received undefined'
                                    },
                                    {
                                    expected: 'string',
                                    code: 'invalid_type',
                                    path: [ 'NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY' ],
                                    message: 'Invalid input: expected string, received undefined'
                                    },
                                    {
                                    expected: 'string',
                                    code: 'invalid_type',
                                    path: [ 'NEXT_PUBLIC_GROWTHBOOK_CLIENT_KEY' ],
                                    message: 'Invalid input: expected string, received undefined'
                                    }
                                    ]
2025-10-28T05:21:08.746Z [WARNING]: Error: Invalid environment variables
                                    at l (.next/server/chunks/_d3c4ef2d._.js:1:115317)
                                    at <unknown> (.next/server/chunks/_d3c4ef2d._.js:1:115489)
                                    at module evaluation (.next/server/chunks/_d3c4ef2d._.js:1:115743)
                                    at instantiateModule (.next/server/chunks/[turbopack]_runtime.js:715:9)
                                    at getOrInstantiateModuleFromParent (.next/server/chunks/[turbopack]_runtime.js:738:12)
                                    at Context.esmImport [as i] (.next/server/chunks/[turbopack]_runtime.js:228:20)
                                    at module evaluation (.next/server/chunks/[root-of-the-server]__6e69d188._.js:1:1188)
                                    at instantiateModule (.next/server/chunks/[turbopack]_runtime.js:715:9)
                                    at instantiateRuntimeModule (.next/server/chunks/[turbopack]_runtime.js:743:12)
                                    at getOrInstantiateRuntimeModule (.next/server/chunks/[turbopack]_runtime.js:756:12)
2025-10-28T05:21:08.752Z [WARNING]: 
2025-10-28T05:21:08.753Z [WARNING]: > Build error occurred
2025-10-28T05:21:08.756Z [WARNING]: Error: Failed to collect page data for /api/donate/create-intent
                                    at ignore-listed frames {
                                    type: 'Error'
                                    }
2025-10-28T05:21:08.850Z [INFO]: ELIFECYCLE  Command failed with exit code 1.
2025-10-28T05:21:08.861Z [ERROR]: !!! Build failed
2025-10-28T05:21:08.861Z [INFO]: Please read more about Amplify Hosting's support for SSR frameworks to find if your build failure is related to an unsupported feature: https://docs.aws.amazon.com/amplify/latest/userguide/amplify-ssr-framework-support.html. You may also find this troubleshooting guide useful: https://docs.aws.amazon.com/amplify/latest/userguide/troubleshooting-ssr-deployment.html
2025-10-28T05:21:08.862Z [ERROR]: !!! Error: Command failed with exit code 1
2025-10-28T05:21:08.862Z [INFO]: # Starting environment caching...
2025-10-28T05:21:08.862Z [INFO]: # Environment caching completed

